# SCM Dashboard ë°ì´í„° ìŠ¤í‚¤ë§ˆ (Data Dictionary)

**ëª©ì **: AI ì±—ë´‡ì´ ì •í™•í•œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ëª¨ë“  ë°ì´í„° êµ¬ì¡°ë¥¼ ë¬¸ì„œí™”

---

## ğŸ“Š 1. snapshot_df (ì¬ê³  ìŠ¤ëƒ…ìƒ·)

**ì„¤ëª…**: íŠ¹ì • ì‹œì ì˜ ì¬ê³  í˜„í™© ë°ì´í„°

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ |
|--------|------|------|------|------|
| `date` | datetime | ì¬ê³  ê¸°ë¡ ë‚ ì§œ | 2025-11-08 | âœ… |
| `center` | string | ë¬¼ë¥˜ì„¼í„° ì½”ë“œ | AMZUS, KR01, íƒœê´‘KR | âœ… |
| `resource_code` | string | SKU ì½”ë“œ (ìƒí’ˆ ê³ ìœ ë²ˆí˜¸) | BA00021 | âœ… |
| `resource_name` | string | ìƒí’ˆëª… | ë¹„íƒ€ë¯¼ ì„¸ëŸ¼, ì½œë¼ê² í¬ë¦¼ | âŒ |
| `stock_qty` | float | ì¬ê³  ìˆ˜ëŸ‰ (ê°œ) | 95.0 | âœ… |
| `unit` | string | ìˆ˜ëŸ‰ ë‹¨ìœ„ | ê°œ, EA | âŒ |

**ì£¼ìš” ìš©ë„**:
- íŠ¹ì • ë‚ ì§œì˜ ì¬ê³  í˜„í™© ì¡°íšŒ
- ì„¼í„°ë³„/SKUë³„ ì¬ê³  ë¶„ì„
- í’ˆì ˆ ìœ„í—˜ ê°ì§€

---

## ğŸ“¦ 2. moves_df (ì¬ê³  ì´ë™ ë‚´ì—­)

**ì„¤ëª…**: ì…ê³ , ì¶œê³ , ì´ë™ ë“± ì¬ê³  ë³€ë™ ê¸°ë¡

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ |
|--------|------|------|------|------|
| `date` ë˜ëŠ” `created_date` | datetime | ì´ë™ ë°œìƒ ë‚ ì§œ | 2025-11-08 | âœ… |
| `center` | string | ë¬¼ë¥˜ì„¼í„° ì½”ë“œ | AMZUS, KR01 | âœ… |
| `resource_code` | string | SKU ì½”ë“œ | BA00021 | âœ… |
| `resource_name` | string | ìƒí’ˆëª… | ë¹„íƒ€ë¯¼ ì„¸ëŸ¼ | âŒ |
| `quantity` | float | ì´ë™ ìˆ˜ëŸ‰ (ì–‘ìˆ˜/ìŒìˆ˜) | 50.0, -30.0 | âœ… |
| `move_type` | string | ì´ë™ ìœ í˜• | CustomerShipment, ì…ê³ , ì¶œê³ , íŒë§¤ | âœ… |
| `from_center` | string | ì¶œë°œ ì„¼í„° (ì´ë™ì‹œ) | AMZUS | âŒ |
| `to_center` | string | ë„ì°© ì„¼í„° (ì´ë™ì‹œ) | KR01 | âŒ |

**move_type ê°’**:
- `CustomerShipment`: ê³ ê° íŒë§¤ (ì¶œê³ )
- `ì¶œê³ `: ì¶œê³ 
- `íŒë§¤`: íŒë§¤
- `ì…ê³ `: ì…ê³ 
- `InboundShipment`: ì…ê³ 
- `Transfer`: ì„¼í„° ê°„ ì´ë™

**ì£¼ìš” ìš©ë„**:
- íŒë§¤ëŸ‰ ë¶„ì„ (move_typeì´ íŒë§¤ ê´€ë ¨ì¼ ë•Œ)
- ì…ê³  ì˜ˆì • í™•ì¸
- ì¬ê³  ë³€ë™ ì¶”ì 

---

## ğŸ“ˆ 3. timeline_df (ì‹œê³„ì—´ ì¬ê³  + ì˜ˆì¸¡)

**ì„¤ëª…**: ì¼ë³„ ì¬ê³  ì¶”ì„¸ ë° ì˜ˆì¸¡ ë°ì´í„°

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ | í•„ìˆ˜ |
|--------|------|------|------|------|
| `date` | datetime | ë‚ ì§œ | 2025-11-08 | âœ… |
| `center` | string | ë¬¼ë¥˜ì„¼í„° ì½”ë“œ | AMZUS | âœ… |
| `resource_code` | string | SKU ì½”ë“œ | BA00021 | âœ… |
| `stock_qty` | float | ì¬ê³  ìˆ˜ëŸ‰ | 95.0 | âœ… |
| `is_forecast` | boolean | ì˜ˆì¸¡ ë°ì´í„° ì—¬ë¶€ | True, False | âœ… |

**is_forecast**:
- `False`: ì‹¤ì œ ì¬ê³  ë°ì´í„° (ê³¼ê±°/í˜„ì¬)
- `True`: AI ì˜ˆì¸¡ ì¬ê³  ë°ì´í„° (ë¯¸ë˜)

**ì£¼ìš” ìš©ë„**:
- ì¬ê³  ì¶”ì„¸ ì‹œê°í™”
- ë¯¸ë˜ ì¬ê³  ì˜ˆì¸¡
- í’ˆì ˆ ì‹œì  ì˜ˆì¸¡

---

## ğŸ” 4. ìƒí’ˆëª… â†’ SKU ë§¤í•‘ (ì„ íƒ ì‚¬í•­)

**ë¬¸ì œ**: ì‚¬ìš©ìê°€ "ë¹„íƒ€ë¯¼ ì„¸ëŸ¼ì˜ íŒë§¤ ì¶”ì„¸ëŠ”?"ì´ë¼ê³  ë¬¼ì–´ë„ AIê°€ SKUë¥¼ ëª¨ë¦„

**í•´ê²°ì±… 1: resource_name ì»¬ëŸ¼ í™œìš©**
```python
# snapshot_df ë˜ëŠ” moves_dfì— resource_nameì´ ìˆë‹¤ë©´
"ë¹„íƒ€ë¯¼ ì„¸ëŸ¼" â†’ resource_name ê²€ìƒ‰ â†’ resource_code ì°¾ê¸°
```

**í•´ê²°ì±… 2: SKU ë§¤í•‘ í…Œì´ë¸”**
```python
product_mapping = {
    "ë¹„íƒ€ë¯¼ ì„¸ëŸ¼": "BA00021",
    "ì½œë¼ê² í¬ë¦¼": "BA00022",
    "íˆì•Œë£¨ë¡ ì‚°": "BA00023",
    ...
}
```

---

## ğŸ’¡ AI ì±—ë´‡ í™œìš© ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ìƒí’ˆëª…ìœ¼ë¡œ ì§ˆë¬¸
**ì§ˆë¬¸**: "ë¹„íƒ€ë¯¼ ì„¸ëŸ¼ì˜ íŒë§¤ ì¶”ì„¸ëŠ”?"

**AI ì²˜ë¦¬**:
1. "ë¹„íƒ€ë¯¼ ì„¸ëŸ¼" ê°ì§€
2. `resource_name` ì»¬ëŸ¼ì—ì„œ "ë¹„íƒ€ë¯¼ ì„¸ëŸ¼" ê²€ìƒ‰ â†’ `BA00021` ë°œê²¬
3. `get_sales_summary(sku="BA00021")` í˜¸ì¶œ

### ì˜ˆì‹œ 2: ë‚ ì§œ ì»¬ëŸ¼ ìë™ ì¸ì‹
**ë©”íƒ€ë°ì´í„°**:
```json
{
  "moves": {
    "columns": {
      "date": "ì´ë™ ë°œìƒ ë‚ ì§œ (datetime)",
      "quantity": "ì´ë™ ìˆ˜ëŸ‰ - ì–‘ìˆ˜=ì…ê³ , ìŒìˆ˜=ì¶œê³  (float)",
      "move_type": "CustomerShipment=íŒë§¤"
    }
  }
}
```

**AI ì´í•´**:
- íŒë§¤ëŸ‰ = `quantity` (move_typeì´ "CustomerShipment"ì¼ ë•Œ)
- ë‚ ì§œ í•„í„° = `date` ì»¬ëŸ¼ ì‚¬ìš©

---

## ğŸ› ï¸ êµ¬í˜„ ê¶Œì¥ì‚¬í•­

### 1. ë©”íƒ€ë°ì´í„° ê°•í™”
í˜„ì¬ `prepare_minimal_metadata()`ì— ìŠ¤í‚¤ë§ˆ ì •ë³´ ì¶”ê°€:

```python
metadata = {
    "schema": {
        "snapshot": {
            "resource_code": "SKU ì½”ë“œ (ìƒí’ˆ ê³ ìœ ë²ˆí˜¸)",
            "stock_qty": "ì¬ê³  ìˆ˜ëŸ‰",
            "date": "ì¬ê³  ê¸°ë¡ ë‚ ì§œ"
        },
        "moves": {
            "resource_code": "SKU ì½”ë“œ",
            "quantity": "ì´ë™ ìˆ˜ëŸ‰ (ì–‘ìˆ˜=ì…ê³ , ìŒìˆ˜=ì¶œê³ )",
            "move_type": "CustomerShipment=ê³ ê°íŒë§¤, ì…ê³ =ì…ê³ ",
            "date": "ì´ë™ ë°œìƒ ë‚ ì§œ"
        }
    }
}
```

### 2. ìƒí’ˆëª… ê²€ìƒ‰ í•¨ìˆ˜ ì¶”ê°€
```python
def search_sku_by_name(product_name: str, snapshot_df: pd.DataFrame) -> Optional[str]:
    """ìƒí’ˆëª…ìœ¼ë¡œ SKU ì½”ë“œ ì°¾ê¸°"""
    if "resource_name" not in snapshot_df.columns:
        return None

    matches = snapshot_df[
        snapshot_df["resource_name"].str.contains(product_name, case=False, na=False)
    ]

    if not matches.empty:
        return matches.iloc[0]["resource_code"]
    return None
```

### 3. Gemini Functionì— ì¶”ê°€
```python
{
    "name": "search_product_by_name",
    "description": "ìƒí’ˆëª…ìœ¼ë¡œ SKU ì½”ë“œë¥¼ ì°¾ìŠµë‹ˆë‹¤",
    "parameters": {
        "type": "object",
        "properties": {
            "product_name": {
                "type": "string",
                "description": "ìƒí’ˆëª… (ì˜ˆ: ë¹„íƒ€ë¯¼ ì„¸ëŸ¼)"
            }
        }
    }
}
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ë°ì´í„° ì¤€ë¹„**:
- [ ] snapshot_dfì— `resource_name` ì»¬ëŸ¼ ìˆëŠ”ì§€ í™•ì¸
- [ ] moves_dfì˜ ë‚ ì§œ ì»¬ëŸ¼ëª… í™•ì¸ (`date` vs `created_date`)
- [ ] moves_dfì˜ `move_type` ê°’ ëª©ë¡ í™•ì¸

**ë¬¸ì„œí™”**:
- [ ] ê° DataFrameì˜ í•„ìˆ˜ ì»¬ëŸ¼ ëª©ë¡
- [ ] move_type ê°’ì˜ ì˜ë¯¸ ì •ì˜
- [ ] ìƒí’ˆëª… ë§¤í•‘ ë°©ë²• ê²°ì •

**êµ¬í˜„**:
- [ ] ë©”íƒ€ë°ì´í„°ì— ìŠ¤í‚¤ë§ˆ ì •ë³´ ì¶”ê°€
- [ ] ìƒí’ˆëª… ê²€ìƒ‰ ê¸°ëŠ¥ (ì„ íƒ)
- [ ] DEBUG ì •ë³´ë¡œ ì‹¤ì œ ì»¬ëŸ¼ í™•ì¸

---

**ì‘ì„±ì¼**: 2025-11-08
**ë²„ì „**: 1.0
**ë‹´ë‹¹**: AI Chatbot ê°œë°œíŒ€
